{
  "info": {
    "_postman_id": "b4b4d63d-5f06-4f2b-87f9-9ef10fd383f2",
    "name": "Personal Agentic Assistant - Go Backend",
    "description": "Postman collection for testing the Go backend APIs (health + SSE chat flows).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    }
  ],
  "item": [
    {
      "name": "Health - GET /health",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "health"
          ]
        },
        "description": "Checks Go backend health status."
      },
      "response": []
    },
    {
      "name": "Chat SSE - Normal Response",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/event-stream"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    { \"role\": \"user\", \"content\": \"Say hello in one sentence\" }\n  ],\n  \"stream\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/chat",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "v1",
            "chat"
          ]
        },
        "description": "Streams assistant text chunks as SSE event: message."
      },
      "response": []
    },
    {
      "name": "Chat SSE - RAG Knowledge Mode",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/event-stream"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    { \"role\": \"system\", \"content\": \"Use RAG knowledge mode\" },\n    { \"role\": \"user\", \"content\": \"What is GenAI and how does RAG work?\" }\n  ],\n  \"stream\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/chat",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "v1",
            "chat"
          ]
        },
        "description": "Forces RAG path by including a system message with knowledge context keyword."
      },
      "response": []
    },
    {
      "name": "Chat SSE - Task Creation Tool Call",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "text/event-stream"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    { \"role\": \"user\", \"content\": \"Create a high priority task: submit tax documents tomorrow\" }\n  ],\n  \"stream\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/chat",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "v1",
            "chat"
          ]
        },
        "description": "Should emit event: tool_call, event: tool_result, and assistant response text."
      },
      "response": []
    },
    {
      "name": "Ingest Document - POST /api/v1/documents",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"RAG stands for Retrieval-Augmented Generation. It combines a retrieval step — fetching relevant chunks from a vector store — with a generation step where an LLM answers using only those chunks as context. This grounds model responses in your private data without any retraining. The quality of a RAG system depends on chunking strategy, embedding model quality, retrieval settings (top-k, score threshold), and a strict prompt that forces context-grounded responses.\",\n  \"source\": \"rag-primer.txt\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/documents",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "v1",
            "documents"
          ]
        },
        "description": "Chunks the supplied text into 400-char overlapping windows (50-char overlap), embeds each chunk with nomic-embed-text (768 dims via Ollama), and upserts the vectors into the Qdrant 'Personal Context' collection.\n\nReturns: { \"chunks_ingested\": N, \"source\": \"rag-primer.txt\" }\n\nAfter ingestion, query via Chat SSE - RAG Knowledge Mode to verify retrieval."
      },
      "response": []
    },
    {
      "name": "Tasks - List (GET /api/v1/tasks)",
      "request": {
        "method": "GET",
        "header": [{ "key": "Accept", "value": "application/json" }],
        "url": {
          "raw": "{{baseUrl}}/api/v1/tasks?user_id=test-user-uuid",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "tasks"],
          "query": [{ "key": "user_id", "value": "test-user-uuid" }]
        },
        "description": "Returns all tasks for the given user_id, ordered newest-first.\n\nResponse: [{id, title, description, priority, status, user_id, created_at}]"
      },
      "response": []
    },
    {
      "name": "Tasks - Update Status (PATCH /api/v1/tasks/:id)",
      "request": {
        "method": "PATCH",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"status\": \"done\",\n  \"user_id\": \"test-user-uuid\"\n}",
          "options": { "raw": { "language": "json" } }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/tasks/1",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "tasks", "1"]
        },
        "description": "Updates the status of task id=1 for the given user.\nValid statuses: pending | in_progress | done\nReturns: {id, status}"
      },
      "response": []
    },
    {
      "name": "Tasks - Delete (DELETE /api/v1/tasks/:id)",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/v1/tasks/1?user_id=test-user-uuid",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "tasks", "1"],
          "query": [{ "key": "user_id", "value": "test-user-uuid" }]
        },
        "description": "Deletes task id=1 owned by user_id. Returns 204 No Content on success."
      },
      "response": []
    },
    {
      "name": "Ingest Document - Minimal (no source)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"My name is Shreyash and I am a software engineer building a local-first personal assistant. I prefer concise answers and use Apple Silicon hardware.\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/documents",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "v1",
            "documents"
          ]
        },
        "description": "Minimal ingest request — no source field (defaults to 'untitled'). Use this to quickly add personal context facts that the assistant can retrieve via RAG."
      },
      "response": []
    }
  ]
}
